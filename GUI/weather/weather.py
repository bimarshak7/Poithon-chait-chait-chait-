from tkinter import *
from weather_calc import *
from urllib.request import urlopen
import base64
root=Tk()
root.geometry("700x700+400+70")
root.minsize(700,700)
root.maxsize(700,700)
root.title("Weather")
root.configure(bg="#001")
icon=PhotoImage(file="weather-icon.png")
root.iconphoto(True,icon)
font1=("Helvetica",20,"underline")
font2=("Arial",16)
canv1 = Canvas(width=700, height=150, bg='red')
canv2 = Canvas(width=700, height=500, bg='#000113')
canv3 = Canvas(width=700, height=100, bg='green')
canv1.create_text(100, 50, text='Enter City NAme',font=("Cursive",22))
canv1.create_line(0, 100, 700, 100,fill="green",width=3)
canv1.create_text(350, 135,text='WEATHER-REPORT',fill="aqua",font=font1)
def display():
	canv2.delete("all")
	data=search(fd1.get())
	if data!="0":
		url=urlopen(data[14]).read()
		icon = base64.encodebytes(url)
		global back
		back=PhotoImage(data=icon)
		canv2.create_image(500,67,image=back)
		canv2.create_text(50,20,anchor=W,text='Country Code: '+data[0]+'\t\t\tCity: '+data[1],fill="white",font=font2)
		canv2.create_text(50,80,anchor=W,text='Weather: '+data[2]+"("+data[3]+")",fill="white",font=font2)
		canv2.create_line(0,110,700,110,width=3,fill="orange")
		canv2.create_text(50,140,anchor=W,text='Temprature: '+data[4]+'\t\tFeels Like: '+data[5],fill="white",font=font2)
		canv2.create_text(50,200,anchor=W,text='Min.Temprature: '+data[6]+'\t\tMax.Temprature: '+data[7],fill="white",font=font2)
		canv2.create_line(0,230,700,230,width=3,fill="orange")
		canv2.create_text(50,260,anchor=W,text='Sunrise: '+data[8]+'\t\t\tSunset: '+data[9],fill="white",font=font2)
		canv2.create_line(0,290,700,290,width=3,fill="orange")
		canv2.create_text(50,320,anchor=W,text='Pressure: '+data[10]+'\t\t\tHumidity: '+data[13],fill="white",font=font2)
		canv2.create_text(50,380,anchor=W,text='Wind Speed: '+data[11]+'('+data[12]+')',fill="white",font=font2)
		canv2.create_text(50,440,anchor=W,text='Visibility: '+data[15],fill="white",font=font2)
		canv2.create_line(0,470,700,470,width=3,fill="orange")
	else:
		canv2.create_text(350,350,text='ERROR FETCHING DATA!',fill="white",font=font1)
sbt=Button(canv1,text="Search",command=display)
fd1=Entry(canv1,font=("Arial",20))
canv1.create_window(400,80, window=sbt)
canv3.create_text(350,20,text="@bimarshak7",fill="white",font=font2)
canv1.create_window(400,40, window=fd1)
canv1.pack()
canv2.pack()
canv3.pack()                 
mainloop()